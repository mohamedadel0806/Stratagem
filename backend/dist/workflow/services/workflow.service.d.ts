import { Repository } from 'typeorm';
import { Queue } from 'bull';
import { Workflow, WorkflowTrigger, EntityType } from '../entities/workflow.entity';
import { WorkflowExecution, WorkflowExecutionStatus } from '../entities/workflow-execution.entity';
import { WorkflowApproval, ApprovalStatus } from '../entities/workflow-approval.entity';
import { WorkflowTriggerRulesService } from './workflow-trigger-rules.service';
import { CreateWorkflowDto } from '../dto/create-workflow.dto';
import { WorkflowResponseDto } from '../dto/workflow-response.dto';
import { Policy } from '../../policy/entities/policy.entity';
import { Risk } from '../../risk/entities/risk.entity';
import { ComplianceRequirement } from '../../common/entities/compliance-requirement.entity';
import { Task } from '../../common/entities/task.entity';
import { User } from '../../users/entities/user.entity';
import { NotificationService } from '../../common/services/notification.service';
import { WorkflowExecutionJob } from '../interfaces/workflow-job.interface';
export declare class WorkflowService {
    private workflowRepository;
    private executionRepository;
    private approvalRepository;
    private policyRepository;
    private riskRepository;
    private requirementRepository;
    private taskRepository;
    private userRepository;
    private workflowRulesService;
    private notificationService;
    private workflowQueue?;
    private readonly logger;
    constructor(workflowRepository: Repository<Workflow>, executionRepository: Repository<WorkflowExecution>, approvalRepository: Repository<WorkflowApproval>, policyRepository: Repository<Policy>, riskRepository: Repository<Risk>, requirementRepository: Repository<ComplianceRequirement>, taskRepository: Repository<Task>, userRepository: Repository<User>, workflowRulesService: WorkflowTriggerRulesService, notificationService: NotificationService, workflowQueue?: Queue<WorkflowExecutionJob>);
    create(createDto: CreateWorkflowDto, userId: string): Promise<WorkflowResponseDto>;
    findAll(): Promise<WorkflowResponseDto[]>;
    findOne(id: string): Promise<WorkflowResponseDto>;
    update(id: string, updateDto: Partial<CreateWorkflowDto>): Promise<WorkflowResponseDto>;
    remove(id: string): Promise<void>;
    executeWorkflow(workflowId: string, entityType: EntityType, entityId: string, inputData?: Record<string, any>): Promise<WorkflowExecution>;
    queueWorkflowExecution(workflowId: string, entityType: EntityType, entityId: string, inputData?: Record<string, any>, triggeredBy?: string): Promise<{
        executionId: string;
        jobId: string;
    }>;
    checkAndTriggerWorkflows(entityType: EntityType, entityId: string, trigger: WorkflowTrigger, entityData?: Record<string, any>, useQueue?: boolean): Promise<void>;
    checkDeadlineWorkflows(): Promise<void>;
    executeWorkflowActionsForExecution(executionId: string): Promise<WorkflowExecution>;
    private executeActions;
    private createApprovalSteps;
    private sendNotifications;
    private changeEntityStatus;
    private assignEntity;
    private createTaskFromWorkflow;
    private checkConditions;
    private processDeadlineWorkflow;
    getPendingApprovalsForUser(userId: string): Promise<any[]>;
    getExecutionHistory(options?: {
        workflowId?: string;
        entityType?: EntityType;
        status?: WorkflowExecutionStatus;
        limit?: number;
    }): Promise<any[]>;
    getExecutionById(executionId: string): Promise<any>;
    getApprovals(executionId: string): Promise<any[]>;
    getApprovalById(approvalId: string): Promise<any>;
    approve(approvalId: string, userId: string, status: ApprovalStatus, comments?: string, signatureData?: any): Promise<void>;
    private toResponseDto;
}
